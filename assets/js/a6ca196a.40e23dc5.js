(self.webpackChunkdoc_ops=self.webpackChunkdoc_ops||[]).push([[912],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return m}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),u=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=u(e.components);return i.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=u(n),m=a,p=h["".concat(l,".").concat(m)]||h[m]||c[m]||r;return n?i.createElement(p,o(o({ref:t},d),{},{components:n})):i.createElement(p,o({ref:t},d))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var u=2;u<r;u++)o[u]=n[u];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},8066:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return d},default:function(){return h}});var i=n(2122),a=n(9756),r=(n(7294),n(3905)),o=["components"],s={},l="Chrysalis Migration",u={unversionedId:"guides/token_guide",id:"guides/token_guide",isDocsHomePage:!1,title:"Chrysalis Migration",description:"By the end of the Chrysalis migration, a number of aspects at IOTA changed for the better. With easier ways to",source:"@site/docs/guides/token_guide.md",sourceDirName:"guides",slug:"/guides/token_guide",permalink:"/guides/token_guide",editUrl:"https://github.com/iotaledger/chrysalis-docs/tree/main/docs/guides/token_guide.md",version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Exchange Guide",permalink:"/guides/exchange_guide"},next:{title:"How the IOTA Chrysalis Phase 2 Token Migration Works",permalink:"/guides/migration-mechanism"}},d=[{value:"Token Migration Overview",id:"token-migration-overview",children:[]},{value:"Exchange Token Migration Guide",id:"exchange-token-migration-guide",children:[{value:"Migrating Funds by Issuing Migration Bundles",id:"migrating-funds-by-issuing-migration-bundles",children:[]}]}],c={toc:d};function h(e){var t=e.components,n=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"chrysalis-migration"},"Chrysalis Migration"),(0,r.kt)("p",null,"By the end of the Chrysalis migration, a number of aspects at IOTA changed for the better. With easier ways to\nmanage and secure your experience, IOTA seamlessly integrated these innovations with no service interruptions."),(0,r.kt)("p",null,"With Chrysalis, we made a clear-cut from the current IOTA protocol, and started a new with a much better, and more mature\nnetwork. The network supports many new use cases and created a foundation for IOTA\u2019s upcoming Coordicide."),(0,r.kt)("p",null,"This included one of the innovations that directly impacted one of the most crucial aspects of your experience: funds."),(0,r.kt)("h2",{id:"token-migration-overview"},"Token Migration Overview"),(0,r.kt)("p",null,"Below is an overview of how the migration is taking place for normal token holders:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"You enter your seed in Firefly."),(0,r.kt)("li",{parentName:"ol"},"Firefly creates you a new seed and generates an EdDSA address for the new network."),(0,r.kt)("li",{parentName:"ol"},"Firefly sends your funds to a specific migration address (which encapsulates your EdDSA address) on the old network."),(0,r.kt)("li",{parentName:"ol"},"Your funds become available on the new network on the EdDSA address Firefly created for you."),(0,r.kt)("li",{parentName:"ol"},"Your funds are successfully migrated.")),(0,r.kt)("p",null,":::Note"),(0,r.kt)("p",null,"If you migrate after the Chrysalis launch, your funds will become available shortly after you migrate (within less\nthan 5 minutes)."),(0,r.kt)("p",null,":::"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Firefly will initially only be available on desktop operating systems such as: macOS, Linux and Windows and not support\nmigrations for Ledger devices or using a Ledger device.")),(0,r.kt)("p",null,"For further information on the migration process, see our ",(0,r.kt)("a",{parentName:"p",href:"https://blog.iota.org/firefly-token-migration/"},"blog post"),"."),(0,r.kt)("p",null,"For a detailed explaination on how the migration process works technically, see ",(0,r.kt)("a",{parentName:"p",href:"/guides/migration-mechanism"},"migration-mechanism")),(0,r.kt)("h2",{id:"exchange-token-migration-guide"},"Exchange Token Migration Guide"),(0,r.kt)("p",null,"To help you successfully transfer your tokens securely to the  Chrysalis network, we created this guide as\nan overview of the migration process and its intricacies."),(0,r.kt)("p",null,"Note: On the 28th of April, Chrysalis Phase 2 was released (with its corresponding node software, libraries and tooling).\nAfter this, the legacy network only supports migration transfers moving further (this is accompanied by a legacy\nnode release). This means that both a legacy (albeit only for migrations), and a new Chrysalis Phase 2 network will\nco-exist. "),(0,r.kt)("p",null,"There are two ways with which you can migrate your funds from the old legacy to the Chrysalis Phase 2 network:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"You can either use our Firefly wallet (which allows migrating from either an 81-tryte seed or seed vault file)\n(check out this ",(0,r.kt)("a",{parentName:"li",href:"https://blog.iota.org/firefly-token-migration/"},"blog post")," on how to do this)(."),(0,r.kt)("li",{parentName:"ol"},"Or you can craft a migration bundle yourself which transfers your funds to a special migration address under your\ncontrol (programmatic approach).")),(0,r.kt)("p",null,"This guide will further only explain how to create a migration bundle, and the rules imposed on it."),(0,r.kt)("h3",{id:"migrating-funds-by-issuing-migration-bundles"},"Migrating Funds by Issuing Migration Bundles"),(0,r.kt)("p",null,"Note that as mentioned above, there was a special release for the legacy node software on the 28th of April, which\nwill only further support migration bundles. In case you're operating a node yourself you must upgrade to that version,\nas otherwise you will no longer be synchronized with the network."),(0,r.kt)("h4",{id:"migration-bundle"},"Migration bundle"),(0,r.kt)("p",null,"With this limited legacy network, only migration bundles will further confirm. A migration bundle is nothing else than a\nnormal value bundle/transfer which has some additional restrictions. If you craft a bundle which obeys to the following\nrules, then it falls under what we define as a migration bundle:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"It contains exactly one output transaction of which the destination address is a valid migration address and is\npositioned as the tail transaction within the bundle (meaning ",(0,r.kt)("inlineCode",{parentName:"li"},"currentIndex")," 0). ",(0,r.kt)("strong",{parentName:"li"},"The output transaction value is at\nleast 1'000'000 tokens (1 Mi).")),(0,r.kt)("li",{parentName:"ul"},"It does not contain any zero-value transactions which do not hold signature fragments. This means that transactions\nother than the tail transaction must always be part of an input."),(0,r.kt)("li",{parentName:"ul"},"Input transactions must not use migration addresses.")),(0,r.kt)("p",null,"If in doubt whether your bundle is an actual migration bundle, you can use ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iotaledger/iota.go/blob/2618d56d58105dfc2f3b7f1eb3481d9f89a1d6bc/bundle/bundle.go#L335"},"ValidBundle(bundle, true)"),"\nfunction of our iota.go library to validate this. In case you're not acquainted with Go, you can also contact us on\nDiscord or Slack to ensure that your crafted bundles are valid migration bundles."),(0,r.kt)("p",null,"Things to consider:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You must not broadcast your own migration bundles unless you're 100% sure that they are indeed valid migration\nbundles."),(0,r.kt)("li",{parentName:"ul"},"If one of your input transactions spends funds from an already used address (meaning it is subject to key re-use), we\nrecommend that you use the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/iotaledger/iota.rs/tree/migration/iota-bundle-miner"},"bundle miner tool")," to craft a bundle with the most applicable security given the already exposed parts of the given address' private key."),(0,r.kt)("li",{parentName:"ul"},"Do not use too many input transactions as this will increase the overall Proof-of-Work time needed for a single\nbundle. Rather, split your input addresses over multiple migration bundles."),(0,r.kt)("li",{parentName:"ul"},"Your code must include logic to await for the migration bundle's confirmation. If you find that your migration bundle\nis not confirming, consider re-attaching it (re-attaching is ",(0,r.kt)("strong",{parentName:"li"},"not")," the same as re-signing the bundle)."),(0,r.kt)("li",{parentName:"ul"},"If you submit a migration bundle for broadcasting via the ",(0,r.kt)("inlineCode",{parentName:"li"},"broadcastTransactions")," API command and you're using the\nupdated legacy node software (which you must on/after the 28th of April), then it will additionally check up on\nsubmission whether your submitted bundle really adheres to the rules outlined above as an additional safe guard.")),(0,r.kt)("p",null,"For further information about the migration bundles, have a look at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/luca-moser/protocol-rfcs/blob/rfc/wotsicide/text/0035-wotsicide/0035-wotsicide.md#migration-bundle"},"RFC-0035"),"."),(0,r.kt)("p",null,"As an example, ",(0,r.kt)("a",{parentName:"p",href:"https://explorer.iota.org/mainnet/bundle/ZRAFFSEPRKDYGGA9DJQBWCXG9CGODUNZUBOWHVFQY9DK9HCHJQTHHSYBQRGZHGXWAPXDTJPPFJ9XFUALW"},"this bundle")," is a valid migration bundle. It spends 1 Mi"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"from:\n",(0,r.kt)("inlineCode",{parentName:"li"},"YVLQWMRUZ9RCQODQZFYDNRVXHERUFPSDVLDRQLHEWGJLRTMEAQNX9OHZJVTONDHMUJQECDCUAR9PUIGAZPAAEHTZXB")),(0,r.kt)("li",{parentName:"ul"},"to:\n",(0,r.kt)("inlineCode",{parentName:"li"},"TRANSFERTBIXPEWWYZZWBWPWJCB9XYMC9AGYH9X9AYAYADVXTYGYB9G9J9PEF9O9KYZXS9D9MANWTZOD9B9HMRQFWZ")," where the destination address encodes the target Bech32 address ",(0,r.kt)("inlineCode",{parentName:"li"},"iota1qqhmslysuwfedz2mqtr4ux73pr7uhjmd4tpazqs8pf7qdax44muqgw0fz25")," respectively the hex Ed25519 address ",(0,r.kt)("inlineCode",{parentName:"li"},"2fb87c90e39396895b02c75e1bd108fdcbcb6daac3d102070a7c06f4d5aef804")," on which the these funds will be made available in the new network.")),(0,r.kt)("h5",{id:"migration-address"},"Migration address"),(0,r.kt)("p",null,"As mentioned above, a migration bundle must have as its single destination/output address a migration address. A\nmigration address is in essence an EdDSA address (to which you hold the keys on the new network) encoded in a legacy\ntryte address. You can create such an address in the following way:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Compute the ",(0,r.kt)("a",{parentName:"li",href:"https://tools.ietf.org/html/rfc7693"},"BLAKE2b-256")," hash ",(0,r.kt)("inlineCode",{parentName:"li"},"H")," of your Ed25519 address ",(0,r.kt)("inlineCode",{parentName:"li"},"A")," (this address is the one you control in the new network; note that an Ed25519 address is the Blake2b-256 hash of your Ed25519 public key)."),(0,r.kt)("li",{parentName:"ul"},"Append the first 4 bytes of ",(0,r.kt)("inlineCode",{parentName:"li"},"H")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"A"),", resulting in 36 bytes."),(0,r.kt)("li",{parentName:"ul"},"Convert ",(0,r.kt)("inlineCode",{parentName:"li"},"A")," to trytes using the ",(0,r.kt)("inlineCode",{parentName:"li"},"b1t6")," encoding (as described\nin ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/iotaledger/protocol-rfcs/blob/master/text/0015-binary-to-ternary-encoding/0015-binary-to-ternary-encoding.md"},"RFC-15"),"). This results in ",(0,r.kt)("inlineCode",{parentName:"li"},"A"),(0,r.kt)("sub",null,"tri")," consisting of 72 trytes."),(0,r.kt)("li",{parentName:"ul"},"Prepend the 8-tryte prefix ",(0,r.kt)("inlineCode",{parentName:"li"},"TRANSFER")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"A"),(0,r.kt)("sub",null,"tri"),"."),(0,r.kt)("li",{parentName:"ul"},"Finally, pad ",(0,r.kt)("inlineCode",{parentName:"li"},"A"),(0,r.kt)("sub",null,"tri")," with the single tryte ",(0,r.kt)("inlineCode",{parentName:"li"},"9")," to get a legacy 81-tryte address.")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ed25519 address (32-byte): ",(0,r.kt)("inlineCode",{parentName:"li"},"6f9e8510b88b0ea4fbc684df90ba310540370a0403067b22cef4971fec3e8bb8")),(0,r.kt)("li",{parentName:"ul"},"Migration address including 9-tryte checksum (\n90-tryte): ",(0,r.kt)("inlineCode",{parentName:"li"},"TRANSFERCDJWLVPAIXRWNAPXV9WYKVUZWWKXVBE9JBABJ9D9C9F9OEGADYO9CWDAGZHBRWIXLXG9MAJV9RJEOLXSJW"))),(0,r.kt)("p",null,"Since nobody holds keys to such migration addresses, funds are effectively burned and can no longer be used in the\nlegacy network."))}h.isMDXComponent=!0}}]);